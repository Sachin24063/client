{"version":3,"sources":["components/Profile/UserInfo.js"],"names":["useStyles","createStyles","theme","indicatorRoot","position","indicator","cursor","display","justifyContent","alignItems","zIndex","backgroundColor","colors","orange","borderWidth","borderStyle","borderColor","colorScheme","color","whiteSpace","bottom","right","transform","width","height","borderRadius","padding","UserInfo","_user$avatar","_user$avatar2","_user$avatar3","_user$providers","updateUser","updateUserState","useSelector","state","auth","classes","user","useOutletContext","dispatch","useDispatch","fileInputRef","useRef","form","useForm","initialValues","id","_id","userAvatar","avatar","url","firstName","lastName","email","username","currentPassword","newPassword","confirmPassword","validate","value","test","values","validateInputOnBlur","useEffect","clearUpdateUser","React","createElement","onSubmit","_Object$entries","Object","entries","errors","length","Paper","sx","fn","smallerThan","marginTop","dark","my","shadow","radius","p","withBorder","loginType","Group","className","onClick","current","click","HiCamera","size","Avatar","src","FileInput","assign","ref","placeholder","label","withAsterisk","getInputProps","Title","order","fontFamily","mb","grow","TextInput","input","background","providers","includes","PasswordInput","styles","Button","loading","type","mt"],"mappings":"mGAAA,qJAmBA,MAAMA,EAAYC,YAAcC,IAAK,CACnCC,cAAe,CACbC,SAAU,YAGZC,UAAW,CACTD,SAAU,WACVE,OAAQ,UACRC,QAAS,OACTC,eAAgB,SAChBC,WAAY,SACZC,OAAQ,IACRC,gBAAiBT,EAAMU,OAAOC,OAAO,GACrCC,YAAa,EACbC,YAAa,QACbC,YAAmC,SAAtBd,EAAMe,YAAyB,UAAY,OACxDC,MAAO,OACPC,WAAY,SACZC,OAAQ,GACRC,MAAO,GACPC,UAAW,sBACXC,MAAO,GACPC,OAAQ,GACRC,aAAc,MACdC,QAAS,MA4NEC,UAxNEA,KAAO,IAADC,EAAAC,EAAAC,EAAAC,EACrB,MAAQC,WAAYC,GAAoBC,YAAaC,GAAUA,EAAMC,OAC/D,QAAEC,GAAYrC,IACdsC,EAAOC,cACPC,EAAWC,cACXC,EAAeC,iBAAO,MACtBC,EAAOC,YAAQ,CACnBC,cAAe,CACbC,IAAQ,OAAJT,QAAI,IAAJA,OAAI,EAAJA,EAAMU,KAAU,OAAJV,QAAI,IAAJA,OAAI,EAAJA,EAAMU,IAAM,GAC5BC,YAAgB,OAAJX,QAAI,IAAJA,GAAY,QAARV,EAAJU,EAAMY,cAAM,IAAAtB,OAAR,EAAJA,EAAcuB,KAAU,OAAJb,QAAI,IAAJA,GAAY,QAART,EAAJS,EAAMY,cAAM,IAAArB,OAAR,EAAJA,EAAcsB,IAAM,GACpDC,WAAe,OAAJd,QAAI,IAAJA,OAAI,EAAJA,EAAMc,WAAgB,OAAJd,QAAI,IAAJA,OAAI,EAAJA,EAAMc,UAAY,GAC/CC,UAAc,OAAJf,QAAI,IAAJA,OAAI,EAAJA,EAAMe,UAAe,OAAJf,QAAI,IAAJA,OAAI,EAAJA,EAAMe,SAAW,GAC5CC,OAAW,OAAJhB,QAAI,IAAJA,OAAI,EAAJA,EAAMgB,OAAY,OAAJhB,QAAI,IAAJA,OAAI,EAAJA,EAAMgB,MAAQ,GACnCC,UAAc,OAAJjB,QAAI,IAAJA,OAAI,EAAJA,EAAMiB,UAAe,OAAJjB,QAAI,IAAJA,OAAI,EAAJA,EAAMiB,SAAW,GAC5CC,gBAAiB,GACjBC,YAAa,GACbC,gBAAiB,IAEnBC,SAAU,CACRP,UAAYQ,GACV,qCAAqCC,KAAKD,GACtC,KACA,sBACNP,SAAWO,GACT,qCAAqCC,KAAKD,GACtC,KACA,qBACNN,MAAQM,GACN,QAAQC,KAAKD,IAER,yCAAyCC,KAAKD,GAD/C,KAEA,iBAENL,SAAWK,GACT,QAAQC,KAAKD,GACT,KACC,oBAAoBC,KAAKD,GAEzB,+BAA+BC,KAAKD,GAErC,KADA,6GAFA,qCAINJ,gBAAiBA,CAACI,EAAOE,KACvB,QAAQD,KAAKD,IACW,KAAvBE,EAAOL,aAAiD,KAA3BK,EAAOJ,gBAEhC,aAAaG,KAAKD,IACK,KAAvBE,EAAOL,aAAiD,KAA3BK,EAAOJ,gBAErC,KADA,qDAHA,gCAKND,YAAaA,CAACG,EAAOE,IACnB,QAAQD,KAAKD,IAAqC,KAA3BE,EAAON,gBAC1B,4BACC,aAAaK,KAAKD,IAAqC,KAA3BE,EAAOJ,gBAEpCE,IAAUE,EAAOJ,gBACjB,0BACA,KAHA,qDAINA,gBAAiBA,CAACE,EAAOE,IACvB,QAAQD,KAAKD,IAAqC,KAA3BE,EAAON,gBAC1B,gCACC,aAAaK,KAAKD,IAAiC,KAAvBE,EAAOL,YAEb,KAAvBK,EAAOL,aAAsBG,IAAUE,EAAOL,YAC9C,0BACA,KAHA,sDAKRM,qBAAqB,IAgBvB,OANAC,oBAAU,IACD,KACLxB,EAASyB,gBAEV,CAACzB,IAGF0B,IAAAC,cAAA,QAAMC,SAAUxB,EAAKwB,SAdDN,IAAY,IAADO,GACrB,OAANC,aAAM,IAANA,QAA4B,QAAtBD,EAANC,OAAQC,QAAQ3B,EAAK4B,eAAO,IAAAH,OAAtB,EAANA,EAA8BI,QAAS,GAG3CjC,EAASR,YAAW8B,OAWlBI,IAAAC,cAACO,IAAK,CACJC,GAAKzE,IAAK,CACR,CAACA,EAAM0E,GAAGC,YAAY,OAAQ,CAC5BC,UAAW,IAEbnE,gBACwB,SAAtBT,EAAMe,YAAyBf,EAAMU,OAAOmE,KAAK,GAAK,SAE1DC,GAAG,KACHC,OAAO,KACPC,OAAO,KACPC,EAAE,KACFC,YAAU,GAEW,WAAhB,OAAJ9C,QAAI,IAAJA,OAAI,EAAJA,EAAM+C,YACLnB,IAAAC,cAACmB,IAAK,CAACH,EAAE,MACPjB,IAAAC,cAAA,OAAKoB,UAAWlD,EAAQlC,eACtB+D,IAAAC,cAAA,QACEqB,QAASA,KACP9C,EAAa+C,QAAQC,SAEvBH,UAAWlD,EAAQhC,WAEnB6D,IAAAC,cAACwB,IAAQ,CAACC,KAAM,MAElB1B,IAAAC,cAAC0B,IAAM,CAACD,KAAM,IAAKV,OAAM,MAASY,IAAS,OAAJxD,QAAI,IAAJA,GAAY,QAARR,EAAJQ,EAAMY,cAAM,IAAApB,OAAR,EAAJA,EAAcqB,OAEvDe,IAAAC,cAAC4B,IAASzB,OAAA0B,OAAA,CACRC,IAAKvD,EACLwD,YAAY,eACZC,MAAM,cACNC,cAAY,EACZzB,GAAI,CACFpE,QAAS,SAEPqC,EAAKyD,cAAc,gBAEzBnC,IAAAC,cAACmC,IAAK,CACJC,MAAO,EACP5B,GAAKzE,IAAK,CACRsG,WAAYtG,EAAMsG,cAGf,OAAJlE,QAAI,IAAJA,OAAI,EAAJA,EAAMc,UAAU,IAAM,OAAJd,QAAI,IAAJA,OAAI,EAAJA,EAAMe,WAI/Ba,IAAAC,cAACmB,IAAK,CAACmB,GAAG,KAAKrG,SAAS,SAASsG,MAAI,GACnCxC,IAAAC,cAACwC,IAASrC,OAAA0B,OAAA,CACRE,YAAY,kBACZC,MAAM,cACFvD,EAAKyD,cAAc,aAAY,CACnC1B,GAAKzE,IAAK,CACR0G,MAAO,CACLC,WACwB,SAAtB3G,EAAMe,YAAyB,UAAY,gBAInDiD,IAAAC,cAACwC,IAASrC,OAAA0B,OAAA,CACRE,YAAY,iBACZC,MAAM,YACNxB,GAAKzE,IAAK,CACR0G,MAAO,CACLC,WACwB,SAAtB3G,EAAMe,YAAyB,UAAY,cAG7C2B,EAAKyD,cAAc,eAG3BnC,IAAAC,cAACmB,IAAK,CAACmB,GAAG,KAAKrG,SAAS,SAASsG,MAAI,GACnCxC,IAAAC,cAACwC,IAASrC,OAAA0B,OAAA,CACRE,YAAY,qBACZC,MAAM,gBACNxB,GAAKzE,IAAK,CACR0G,MAAO,CACLC,WACwB,SAAtB3G,EAAMe,YAAyB,UAAY,cAG7C2B,EAAKyD,cAAc,WAEzBnC,IAAAC,cAACwC,IAASrC,OAAA0B,OAAA,CACRE,YAAY,gBACZC,MAAM,WACNxB,GAAKzE,IAAK,CACR0G,MAAO,CACLC,WACwB,SAAtB3G,EAAMe,YAAyB,UAAY,cAG7C2B,EAAKyD,cAAc,gBAGtB,OAAJ/D,QAAI,IAAJA,GAAe,QAAXP,EAAJO,EAAMwE,iBAAS,IAAA/E,OAAX,EAAJA,EAAiBgF,SAAS,WACzB7C,IAAAC,cAAC6C,IAAa1C,OAAA0B,OAAA,CACZS,GAAG,KACHP,YAAY,mBACZC,MAAM,mBACNc,OAAS/G,IAAK,CACZ2G,WAAkC,SAAtB3G,EAAMe,YAAyB,UAAY,aAErD2B,EAAKyD,cAAc,qBAG3BnC,IAAAC,cAAC6C,IAAa1C,OAAA0B,OAAA,CACZS,GAAG,KACHP,YAAY,eACZC,MAAM,gBACFvD,EAAKyD,cAAc,iBAEzBnC,IAAAC,cAAC6C,IAAa1C,OAAA0B,OAAA,CACZS,GAAG,KACHP,YAAY,uBACZC,MAAM,wBACFvD,EAAKyD,cAAc,qBAEzBnC,IAAAC,cAAC+C,IAAM,CACLC,QAASlF,EAAgBkF,QACzBC,KAAK,SACLC,GAAG,KACHnC,OAAO,KACPD,OAAO,MACR","file":"static/js/24.ca324e40.chunk.js","sourcesContent":["import {\n  TextInput,\n  PasswordInput,\n  Group,\n  Paper,\n  Title,\n  Avatar,\n  createStyles,\n  Button,\n  FileInput,\n} from \"@mantine/core\";\nimport { useForm } from \"@mantine/form\";\nimport { HiCamera } from \"react-icons/hi\";\nimport { useOutletContext } from \"react-router-dom\";\nimport { updateUser, clearUpdateUser } from \"../../redux/slices/authSlice\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useEffect, useRef } from \"react\";\nimport React from \"react\";\n\nconst useStyles = createStyles((theme) => ({\n  indicatorRoot: {\n    position: \"relative\",\n  },\n\n  indicator: {\n    position: \"absolute\",\n    cursor: \"pointer\",\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    zIndex: 100,\n    backgroundColor: theme.colors.orange[9],\n    borderWidth: 2,\n    borderStyle: \"solid\",\n    borderColor: theme.colorScheme === \"dark\" ? \"#16181a\" : \"#fff\",\n    color: \"#fff\",\n    whiteSpace: \"nowrap\",\n    bottom: 14,\n    right: 14,\n    transform: \"translate(50%, 50%)\",\n    width: 30,\n    height: 30,\n    borderRadius: \"50%\",\n    padding: 5,\n  },\n}));\n\nconst UserInfo = () => {\n  const { updateUser: updateUserState } = useSelector((state) => state.auth);\n  const { classes } = useStyles();\n  const user = useOutletContext();\n  const dispatch = useDispatch();\n  const fileInputRef = useRef(null);\n  const form = useForm({\n    initialValues: {\n      id: user?._id ? user?._id : \"\",\n      userAvatar: user?.avatar?.url ? user?.avatar?.url : \"\",\n      firstName: user?.firstName ? user?.firstName : \"\",\n      lastName: user?.lastName ? user?.lastName : \"\",\n      email: user?.email ? user?.email : \"\",\n      username: user?.username ? user?.username : \"\",\n      currentPassword: \"\",\n      newPassword: \"\",\n      confirmPassword: \"\",\n    },\n    validate: {\n      firstName: (value) =>\n        /^[a-zA-Z]{2,}(?:[\\s'-][a-zA-Z]+)*$/.test(value)\n          ? null\n          : \"Invalid first name!\",\n      lastName: (value) =>\n        /^[a-zA-Z]{2,}(?:[\\s'-][a-zA-Z]+)*$/.test(value)\n          ? null\n          : \"Invalid last name!\",\n      email: (value) =>\n        /^\\s*$/.test(value)\n          ? null\n          : !/^[\\w.-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/.test(value)\n          ? \"Invalid email!\"\n          : null,\n      username: (value) =>\n        /^\\s*$/.test(value)\n          ? null\n          : !/^[a-zA-Z][\\w\\W]*$/.test(value)\n          ? \"Username must start with a letter!\"\n          : !/^[A-Za-z][A-Za-z0-9_]{7,29}$/.test(value)\n          ? \"Username must be between 7 and 29 characters long, and can only contain letters, numbers, and underscores!\"\n          : null,\n      currentPassword: (value, values) =>\n        /^\\s*$/.test(value) &&\n        (values.newPassword !== \"\" || values.confirmPassword !== \"\")\n          ? \"Current password is required!\"\n          : !/^\\w{6,16}$/.test(value) &&\n            (values.newPassword !== \"\" || values.confirmPassword !== \"\")\n          ? \"Password must be between 6 and 16 characters long!\"\n          : null,\n      newPassword: (value, values) =>\n        /^\\s*$/.test(value) && values.currentPassword !== \"\"\n          ? \"New password is required!\"\n          : !/^\\w{6,16}$/.test(value) && values.confirmPassword !== \"\"\n          ? \"Password must be between 6 and 16 characters long!\"\n          : value !== values.confirmPassword\n          ? \"Passwords do not match!\"\n          : null,\n      confirmPassword: (value, values) =>\n        /^\\s*$/.test(value) && values.currentPassword !== \"\"\n          ? \"Confirm password is required!\"\n          : !/^\\w{6,16}$/.test(value) && values.newPassword !== \"\"\n          ? \"Password must be between 6 and 16 characters long!\"\n          : values.newPassword !== \"\" && value !== values.newPassword\n          ? \"Passwords do not match!\"\n          : null,\n    },\n    validateInputOnBlur: true, // Validate input on blur\n  });\n\n  const handleSubmit = (values) => {\n    if (Object?.entries(form.errors)?.length > 0) {\n      return;\n    }\n    dispatch(updateUser(values));\n  };\n\n  useEffect(() => {\n    return () => {\n      dispatch(clearUpdateUser());\n    };\n  }, [dispatch]);\n\n  return (\n    <form onSubmit={form.onSubmit(handleSubmit)}>\n      <Paper\n        sx={(theme) => ({\n          [theme.fn.smallerThan(\"md\")]: {\n            marginTop: 60,\n          },\n          backgroundColor:\n            theme.colorScheme === \"dark\" ? theme.colors.dark[6] : \"#fff\",\n        })}\n        my=\"md\"\n        shadow=\"xs\"\n        radius=\"md\"\n        p=\"lg\"\n        withBorder\n      >\n        {user?.loginType === \"local\" && (\n          <Group p=\"lg\">\n            <div className={classes.indicatorRoot}>\n              <span\n                onClick={() => {\n                  fileInputRef.current.click();\n                }}\n                className={classes.indicator}\n              >\n                <HiCamera size={25} />\n              </span>\n              <Avatar size={120} radius={`50%`} src={user?.avatar?.url} />\n            </div>\n            <FileInput\n              ref={fileInputRef}\n              placeholder=\"Pick picture\"\n              label=\"Your avatar\"\n              withAsterisk\n              sx={{\n                display: \"none\",\n              }}\n              {...form.getInputProps(\"userAvatar\")}\n            />\n            <Title\n              order={3}\n              sx={(theme) => ({\n                fontFamily: theme.fontFamily,\n              })}\n            >\n              {user?.firstName} {user?.lastName}\n            </Title>\n          </Group>\n        )}\n        <Group mb=\"lg\" position=\"center\" grow>\n          <TextInput\n            placeholder=\"Your first name\"\n            label=\"First Name\"\n            {...form.getInputProps(\"firstName\")}\n            sx={(theme) => ({\n              input: {\n                background:\n                  theme.colorScheme === \"dark\" ? \"#1f2124\" : \"#e9e9ec\",\n              },\n            })}\n          />\n          <TextInput\n            placeholder=\"Your last name\"\n            label=\"Last Name\"\n            sx={(theme) => ({\n              input: {\n                background:\n                  theme.colorScheme === \"dark\" ? \"#1f2124\" : \"#e9e9ec\",\n              },\n            })}\n            {...form.getInputProps(\"lastName\")}\n          />\n        </Group>\n        <Group mb=\"lg\" position=\"center\" grow>\n          <TextInput\n            placeholder=\"Your email address\"\n            label=\"Email Address\"\n            sx={(theme) => ({\n              input: {\n                background:\n                  theme.colorScheme === \"dark\" ? \"#1f2124\" : \"#e9e9ec\",\n              },\n            })}\n            {...form.getInputProps(\"email\")}\n          />\n          <TextInput\n            placeholder=\"Your username\"\n            label=\"Username\"\n            sx={(theme) => ({\n              input: {\n                background:\n                  theme.colorScheme === \"dark\" ? \"#1f2124\" : \"#e9e9ec\",\n              },\n            })}\n            {...form.getInputProps(\"username\")}\n          />\n        </Group>\n        {user?.providers?.includes(\"local\") && (\n          <PasswordInput\n            mb=\"md\"\n            placeholder=\"Current password\"\n            label=\"Current Password\"\n            styles={(theme) => ({\n              background: theme.colorScheme === \"dark\" ? \"#1f2124\" : \"#e9e9ec\",\n            })}\n            {...form.getInputProps(\"currentPassword\")}\n          />\n        )}\n        <PasswordInput\n          mb=\"md\"\n          placeholder=\"New password\"\n          label=\"New Password\"\n          {...form.getInputProps(\"newPassword\")}\n        />\n        <PasswordInput\n          mb=\"md\"\n          placeholder=\"Confirm new password\"\n          label=\"Confirm New Password\"\n          {...form.getInputProps(\"confirmPassword\")}\n        />\n        <Button\n          loading={updateUserState.loading}\n          type=\"submit\"\n          mt=\"md\"\n          radius=\"md\"\n          shadow=\"sm\"\n        >\n          Save Changes\n        </Button>\n      </Paper>\n    </form>\n  );\n};\n\nexport default UserInfo;\n"],"sourceRoot":""}