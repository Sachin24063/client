(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[26],{433:function(e,a,t){"use strict";t.r(a);var r=t(302),l=t(343),i=t(0),n=t.n(i),o=t(45),c=t(84),s=t(260),d=t(286),m=t(292),u=t(291),h=t(325),p=t(422),g=t(432),b=t(59),E=t(352),v=t(355),f=t(273),y=t(308),k=t(428),w=t(348),O=t(421),x=t(353),C=t.n(x),j=t(89);const A=Object(s.a)(e=>({root:{position:"relative",margin:"1rem 0"},paperTitle:{fontFamily:e.fontFamily,paddingBottom:16,marginBottom:16,borderBottom:"1px solid ".concat("dark"===e.colorScheme?e.colors.gray[3]:e.colors.dark[7])},input:{height:"auto",paddingTop:18},label:{position:"absolute",pointerEvents:"none",fontSize:e.fontSizes.xs,paddingLeft:e.spacing.sm,paddingTop:e.spacing.sm/2,zIndex:1}}));var S=e=>{var a,t,r,c,s,x,S,N,z,I,P,B,T,D,Y,Z,q,F;let{user:$,onCheckoutFinish:G,mustSubmit:M}=e;const{classes:V}=A(),_=Object(o.b)(),J=Object(i.useRef)(null),L=Object(k.a)({initialValues:{user:(null===$||void 0===$?void 0:$._id)?null===$||void 0===$?void 0:$._id:"",firstName:(null===$||void 0===$||null===(a=$.primaryAddress)||void 0===a?void 0:a.firstName)?null===$||void 0===$||null===(t=$.primaryAddress)||void 0===t?void 0:t.firstName:"",lastName:(null===$||void 0===$||null===(r=$.primaryAddress)||void 0===r?void 0:r.lastName)?null===$||void 0===$||null===(c=$.primaryAddress)||void 0===c?void 0:c.lastName:"",streetAddress:(null===$||void 0===$||null===(s=$.primaryAddress)||void 0===s?void 0:s.streetAddress)?null===$||void 0===$||null===(x=$.primaryAddress)||void 0===x?void 0:x.streetAddress:"",city:(null===$||void 0===$||null===(S=$.primaryAddress)||void 0===S?void 0:S.city)?null===$||void 0===$||null===(N=$.primaryAddress)||void 0===N?void 0:N.city:"",state:(null===$||void 0===$||null===(z=$.primaryAddress)||void 0===z?void 0:z.state)?null===$||void 0===$||null===(I=$.primaryAddress)||void 0===I?void 0:I.state:"",zipCode:(null===$||void 0===$||null===(P=$.primaryAddress)||void 0===P?void 0:P.zipCode)?null===$||void 0===$||null===(B=$.primaryAddress)||void 0===B?void 0:B.zipCode:"",country:(null===$||void 0===$||null===(T=$.primaryAddress)||void 0===T?void 0:T.country)?null===$||void 0===$||null===(D=$.primaryAddress)||void 0===D?void 0:D.country:"",email:(null===$||void 0===$||null===(Y=$.primaryAddress)||void 0===Y?void 0:Y.email)?null===$||void 0===$||null===(Z=$.primaryAddress)||void 0===Z?void 0:Z.email:"",phoneNumber:(null===$||void 0===$||null===(q=$.primaryAddress)||void 0===q?void 0:q.phoneNumber)?null===$||void 0===$||null===(F=$.primaryAddress)||void 0===F?void 0:F.phoneNumber:"",cardName:"",cardNumber:"",ccv:"",expiry:""},validate:{firstName:e=>/^[a-zA-Z]{2,}(?:[\s'-][a-zA-Z]+)*$/.test(e)?null:"Invalid first name!",lastName:e=>/^[a-zA-Z]{2,}(?:[\s'-][a-zA-Z]+)*$/.test(e)?null:"Invalid last name!",streetAddress:Object(w.a)({min:5,max:50},"Street address must be 5-50 characters long!"),city:Object(O.a)("City is required!"),state:Object(O.a)("State is required!"),zipCode:Object(O.a)("Zip code is required!"),country:Object(O.a)("Country is required!"),email:e=>/^\s*$/.test(e)?"Email is required!":/^[\w.-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e)?null:"Invalid email!",phoneNumber:e=>/^\s*$/.test(e)?"Phone number is required!":/^[+]?[(]?[0-9]{3}[)]?[-\s.]?[0-9]{3}[-\s.]?[0-9]{4,6}$/.test(e)?null:"Invalid phone number!",cardName:e=>/^[a-zA-Z]+(?:[\s'-][a-zA-Z]+)*$/.test(e)?null:"Invalid card holder name!",cardNumber:e=>/^[3-6]\d{3} \d{4} \d{4} \d{4}$/.test(e)?null:"Invalid card number!",ccv:e=>/^[0-9]{3}$/.test(e)?null:"Invalid CCV!",expiry:e=>/^(0[1-9]|1[0-2])\/([0-9]{2})$/.test(e)?null:"Invalid expiry!"},validateInputOnBlur:!0});return Object(i.useMemo)(()=>{var e;M&&(null===J||void 0===J||null===(e=J.current)||void 0===e||e.requestSubmit(),G())},[M]),n.a.createElement(l.a.Col,{sm:8},n.a.createElement("form",{onSubmit:L.onSubmit(e=>{L.isValid()&&_(Object(j.a)(e))}),ref:J},n.a.createElement(d.a,{sx:e=>({backgroundColor:"dark"===e.colorScheme?e.colors.dark[6]:"#fff"}),my:"md",shadow:"xs",radius:"md",p:"md",withBorder:!0},n.a.createElement(m.a,{className:V.paperTitle,order:3},"Billing Details"),n.a.createElement(u.a,{position:"center",grow:!0},n.a.createElement(h.a,Object.assign({placeholder:"Your first name",label:"First Name",withAsterisk:!0,sx:e=>({input:{background:"dark"===e.colorScheme?"#1f2124":"#e9e9ec"}}),classNames:V},L.getInputProps("firstName"))),n.a.createElement(h.a,Object.assign({placeholder:"Your last name",label:"Last Name",withAsterisk:!0,sx:e=>({input:{background:"dark"===e.colorScheme?"#1f2124":"#e9e9ec"}}),classNames:V},L.getInputProps("lastName")))),n.a.createElement(h.a,Object.assign({label:"Street address",placeholder:"15329 Huston 21st",withAsterisk:!0,sx:e=>({input:{background:"dark"===e.colorScheme?"#1f2124":"#e9e9ec"}}),classNames:V},L.getInputProps("streetAddress"))),n.a.createElement(l.a,{grow:!0},n.a.createElement(l.a.Col,{xs:6},n.a.createElement(h.a,Object.assign({placeholder:"Shipping City",label:"Town/City",withAsterisk:!0,sx:e=>({input:{background:"dark"===e.colorScheme?"#1f2124":"#e9e9ec"}}),classNames:V},L.getInputProps("city")))),n.a.createElement(l.a.Col,{xs:3},n.a.createElement(h.a,Object.assign({placeholder:"Shipping State",label:"State",withAsterisk:!0,sx:e=>({input:{background:"dark"===e.colorScheme?"#1f2124":"#e9e9ec"}}),classNames:V},L.getInputProps("state")))),n.a.createElement(l.a.Col,{xs:3},n.a.createElement(h.a,Object.assign({placeholder:"Shipping Zip Code",label:"Zip Code",withAsterisk:!0,sx:e=>({input:{background:"dark"===e.colorScheme?"#1f2124":"#e9e9ec"}}),classNames:V},L.getInputProps("zipCode"))))),n.a.createElement(h.a,Object.assign({label:"Country",placeholder:"Shipping Country",classNames:V,withAsterisk:!0,sx:e=>({input:{background:"dark"===e.colorScheme?"#1f2124":"#e9e9ec"}})},L.getInputProps("country"))),n.a.createElement(h.a,Object.assign({label:"Email",placeholder:"Your email",withAsterisk:!0,rightSection:n.a.createElement(v.a,{size:14}),sx:e=>({input:{background:"dark"===e.colorScheme?"#1f2124":"#e9e9ec"}}),classNames:V},L.getInputProps("email"))),n.a.createElement(h.a,Object.assign({label:"Phone Number",placeholder:"Your Phone Number",withAsterisk:!0,sx:e=>({input:{background:"dark"===e.colorScheme?"#1f2124":"#e9e9ec"}}),rightSection:n.a.createElement(f.d,{size:14}),classNames:V},L.getInputProps("phoneNumber")))),n.a.createElement(d.a,{sx:e=>({backgroundColor:"dark"===e.colorScheme?e.colors.dark[6]:"#fff"}),my:"md",shadow:"xs",radius:"md",p:"md",withBorder:!0},n.a.createElement(m.a,{className:V.paperTitle,order:3},"Payment Details"),n.a.createElement(h.a,Object.assign({placeholder:"Your name on card",label:"Name on card",withAsterisk:!0,sx:e=>({input:{background:"dark"===e.colorScheme?"#1f2124":"#e9e9ec"}}),classNames:V},L.getInputProps("cardName"))),n.a.createElement(l.a,{grow:!0},n.a.createElement(l.a.Col,{xs:6},n.a.createElement(p.a,Object.assign({label:"Card number",placeholder:"Your card number",component:C.a,mask:"9999 9999 9999 9999",sx:e=>({input:{background:"dark"===e.colorScheme?"#1f2124":"#e9e9ec"}}),classNames:V},L.getInputProps("cardNumber")))),n.a.createElement(l.a.Col,{xs:3},n.a.createElement(p.a,Object.assign({label:"CCV",placeholder:"CCV",component:C.a,mask:"999",sx:e=>({input:{background:"dark"===e.colorScheme?"#1f2124":"#e9e9ec"}}),classNames:V},L.getInputProps("ccv"),{rightSection:n.a.createElement(g.a,{label:"The 3 digit code usually found on the back of your card",position:"top-end",withArrow:!0,transition:"pop-bottom-right"},n.a.createElement(b.a,{color:"dimmed",sx:{cursor:"help"}},n.a.createElement(E.a,null,n.a.createElement(y.b,{size:18}))))}))),n.a.createElement(l.a.Col,{xs:3},n.a.createElement(p.a,Object.assign({label:"Date (MM/YY)",placeholder:"MM/YY",component:C.a,mask:[/[0-1]/,/\d/,"/",/[0-9]/,/\d/],sx:e=>({input:{background:"dark"===e.colorScheme?"#1f2124":"#e9e9ec"}}),classNames:V},L.getInputProps("expiry"))))))))},N=t(416),z=t(417),I=t(344),P=t(83);var B=e=>{var a,t,r,i,c,s;let{cart:h,subTotal:p,isGettingCart:g,onCheckout:E}=e;const{loading:v}=Object(o.c)(e=>e.order.addOrder);return n.a.createElement(l.a.Col,{sm:4},n.a.createElement(d.a,{sx:e=>({backgroundColor:"dark"===e.colorScheme?e.colors.dark[6]:"#fff"}),my:"md",shadow:"xs",radius:"md",p:"md",withBorder:!0},n.a.createElement(u.a,{mb:10},n.a.createElement(m.a,{sx:e=>({fontFamily:e.fontFamily,paddingBottom:16,marginBottom:16,borderBottom:"1px solid ".concat("dark"===e.colorScheme?e.colors.gray[3]:e.colors.dark[7])}),order:3},"Your Order"),n.a.createElement(P.b,{to:"/cart",style:{color:"inherit",textDecoration:"none"}},n.a.createElement(b.a,{tt:"uppercase",fz:"xs"},"Edit Shopping Cart"))),!g&&h&&(null===Object||void 0===Object||null===(a=Object.entries(h))||void 0===a?void 0:a.length)>0&&(null===h||void 0===h||null===(t=h.cartItems)||void 0===t?void 0:t.length)>0&&(null===h||void 0===h||null===(r=h.cartItems)||void 0===r?void 0:r.map(e=>n.a.createElement(u.a,{key:e._id,mb:"md",mt:"md"},n.a.createElement(N.a,{radius:"md",src:e.pizza.image,width:100,height:100,withPlaceholder:!0}),n.a.createElement("div",{style:{width:"min-content",flexGrow:1}},n.a.createElement(b.a,{lineClamp:4,component:"h3"},e.pizza.name),n.a.createElement(u.a,{position:"apart"},n.a.createElement(u.a,{position:"apart"},n.a.createElement(b.a,{fz:"sm"},e.pizza.price,"DA"),n.a.createElement(b.a,{fz:"sm"},"x",e.quantity)),n.a.createElement(b.a,{fz:"sm",fw:700},e.subTotal,"DA")))))),n.a.createElement(z.a,{my:"sm",variant:"dashed"}),!g&&h&&(null===Object||void 0===Object||null===(i=Object.entries(h))||void 0===i?void 0:i.length)>0&&n.a.createElement(u.a,{my:10,position:"apart"},n.a.createElement(b.a,null,"Subtotal"),n.a.createElement(b.a,{fz:"sm",fw:700},"DA",p)),!g&&h&&(null===Object||void 0===Object||null===(c=Object.entries(h))||void 0===c?void 0:c.length)>0&&n.a.createElement(u.a,{my:10,position:"apart"},n.a.createElement(b.a,null,"Shipping"),n.a.createElement(b.a,{fz:"sm",fw:700},0===h.shipping?"Free":"".concat(h.shipping,"DA"))),n.a.createElement(u.a,{my:10,position:"apart"},n.a.createElement(b.a,null,"Discount"),n.a.createElement(b.a,{fz:"sm",fw:700},0===(null===h||void 0===h?void 0:h.discountedPrice)?"- DA0":"- DA".concat(null===h||void 0===h?void 0:h.discountedPrice))),!g&&h&&(null===Object||void 0===Object||null===(s=Object.entries(h))||void 0===s?void 0:s.length)>0&&n.a.createElement(u.a,{my:10,position:"apart"},n.a.createElement(b.a,null,"Total Cost"),n.a.createElement(b.a,{fz:"sm",fw:700},h.totalToPay,"DA")),n.a.createElement(z.a,{my:"sm",variant:"dashed"}),n.a.createElement(I.a,{loading:v,uppercase:!0,fullWidth:!0,radius:"md",mt:"xs",style:{flex:1},onClick:()=>E()},"Place Your Order")))},T=t(345);var D=()=>n.a.createElement(l.a.Col,{sm:8},n.a.createElement(d.a,{sx:e=>({backgroundColor:"dark"===e.colorScheme?e.colors.dark[6]:"#fff"}),my:"md",shadow:"xs",radius:"md",p:"md",withBorder:!0},n.a.createElement(T.a,{mb:"lg",height:25,width:"30%"}),n.a.createElement(u.a,{mb:"lg",position:"center",grow:!0},n.a.createElement(T.a,{height:50,width:"50%"}),n.a.createElement(T.a,{height:50,width:"50%"})),n.a.createElement(T.a,{mb:"lg",height:50,width:"100%"}),n.a.createElement(l.a,{mb:"lg",grow:!0},n.a.createElement(l.a.Col,{xs:6},n.a.createElement(T.a,{height:50})),n.a.createElement(l.a.Col,{xs:3},n.a.createElement(T.a,{height:50})),n.a.createElement(l.a.Col,{xs:3},n.a.createElement(T.a,{height:50}))),n.a.createElement(T.a,{mb:"lg",height:50}),n.a.createElement(T.a,{mb:"lg",height:50}),n.a.createElement(T.a,{mb:"lg",height:50})),n.a.createElement(d.a,{sx:e=>({backgroundColor:"dark"===e.colorScheme?e.colors.dark[6]:"#fff"}),my:"md",shadow:"xs",radius:"md",p:"md",withBorder:!0},n.a.createElement(T.a,{mb:"lg",height:25,width:"30%"}),n.a.createElement(T.a,{mb:"lg",height:50}),n.a.createElement(l.a,{mb:"lg",grow:!0},n.a.createElement(l.a.Col,{xs:6},n.a.createElement(T.a,{height:50})),n.a.createElement(l.a.Col,{xs:3},n.a.createElement(T.a,{height:50})),n.a.createElement(l.a.Col,{xs:3},n.a.createElement(T.a,{height:50})))));var Y=()=>n.a.createElement(l.a.Col,{sm:4},n.a.createElement(d.a,{sx:e=>({backgroundColor:"dark"===e.colorScheme?e.colors.dark[6]:"#fff"}),my:"md",shadow:"xs",radius:"md",p:"md",withBorder:!0},n.a.createElement(u.a,{mb:10},n.a.createElement(T.a,{height:25,width:"40%"}),n.a.createElement(T.a,{height:15,width:"30%"})),n.a.createElement(u.a,{mb:"md",mt:"md"},n.a.createElement(T.a,{height:100,width:100}),n.a.createElement("div",{style:{width:"min-content",flexGrow:1}},n.a.createElement(T.a,{height:20,mb:"md"}),n.a.createElement(u.a,{position:"apart"},n.a.createElement(T.a,{height:20,width:"20%"}),n.a.createElement(T.a,{height:20,width:"20%"}),n.a.createElement(T.a,{height:20,width:"25%"})))),n.a.createElement(u.a,{mb:"md",mt:"md"},n.a.createElement(T.a,{height:100,width:100}),n.a.createElement("div",{style:{width:"min-content",flexGrow:1}},n.a.createElement(T.a,{height:20,mb:"md"}),n.a.createElement(u.a,{position:"apart"},n.a.createElement(T.a,{height:20,width:"20%"}),n.a.createElement(T.a,{height:20,width:"20%"}),n.a.createElement(T.a,{height:20,width:"25%"})))),n.a.createElement(z.a,{my:"sm",variant:"dashed"}),n.a.createElement(u.a,{my:10,position:"apart"},n.a.createElement(T.a,{height:20,width:"40%"}),n.a.createElement(T.a,{height:20,width:"25%"})),n.a.createElement(u.a,{my:10,position:"apart"},n.a.createElement(T.a,{height:20,width:"40%"}),n.a.createElement(T.a,{height:20,width:"25%"})),n.a.createElement(u.a,{my:10,position:"apart"},n.a.createElement(T.a,{height:20,width:"40%"}),n.a.createElement(T.a,{height:20,width:"25%"})),n.a.createElement(u.a,{my:10,position:"apart"},n.a.createElement(T.a,{height:20,width:"40%"}),n.a.createElement(T.a,{height:20,width:"25%"})),n.a.createElement(z.a,{my:"sm",variant:"dashed"}),n.a.createElement(T.a,{height:40}))),Z=t(3);a.default=()=>{var e,a;const t=Object(o.b)(),s=Object(Z.q)(),{cart:d,isGettingCart:m}=Object(o.c)(e=>e.cart),{user:u,isRefreshingToken:h}=Object(o.c)(e=>e.auth),{addOrder:p}=Object(o.c)(e=>e.order),[g,b]=Object(i.useState)(!1);Object(i.useMemo)(()=>(document.title="Checkout | Pizza Fleet",()=>{document.title="Pizza Fleet"}),[]),Object(i.useEffect)(()=>{t(Object(c.i)())},[t]);let E=0;var v;d&&(null===Object||void 0===Object||null===(e=Object.entries(d))||void 0===e?void 0:e.length)>0&&(null===d||void 0===d||null===(v=d.cartItems)||void 0===v||v.map(e=>(E+=e.pizza.price*e.quantity,E)));return Object(i.useEffect)(()=>{p.success&&s("/order-placed")},[p.success,s]),n.a.createElement(r.a,{size:"lg"},n.a.createElement(l.a,{my:15},h&&n.a.createElement(D,null),!h&&n.a.createElement(S,{user:u,onCheckoutFinish:()=>b(!1),mustSubmit:g}),m&&n.a.createElement(Y,null),!m&&d&&(null===Object||void 0===Object||null===(a=Object.entries(d))||void 0===a?void 0:a.length)>0&&n.a.createElement(B,{cart:d,subTotal:E,isGettingCart:m,onCheckout:()=>b(!0)})))}}}]);
//# sourceMappingURL=26.52900c54.chunk.js.map