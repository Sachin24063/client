{"ast":null,"code":"import { filterErrors } from '../filter-errors/filter-errors.js';\nimport { getPath } from '../paths/get-path.js';\nfunction getValidationResults(errors) {\n  const filteredErrors = filterErrors(errors);\n  return {\n    hasErrors: Object.keys(filteredErrors).length > 0,\n    errors: filteredErrors\n  };\n}\nfunction validateRulesRecord(rules, values) {\n  let path = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"\";\n  let errors = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  if (typeof rules !== \"object\" || rules === null) {\n    return errors;\n  }\n  return Object.keys(rules).reduce((acc, ruleKey) => {\n    const rule = rules[ruleKey];\n    const rulePath = \"\".concat(path === \"\" ? \"\" : \"\".concat(path, \".\")).concat(ruleKey);\n    const value = getPath(rulePath, values);\n    let arrayValidation = false;\n    if (typeof rule === \"function\") {\n      acc[rulePath] = rule(value, values, rulePath);\n    }\n    if (typeof rule === \"object\" && Array.isArray(value)) {\n      arrayValidation = true;\n      value.forEach((_item, index) => validateRulesRecord(rule, values, \"\".concat(rulePath, \".\").concat(index), acc));\n    }\n    if (typeof rule === \"object\" && typeof value === \"object\" && value !== null) {\n      if (!arrayValidation) {\n        validateRulesRecord(rule, values, rulePath, acc);\n      }\n    }\n    return acc;\n  }, errors);\n}\nfunction validateValues(validate, values) {\n  if (typeof validate === \"function\") {\n    return getValidationResults(validate(values));\n  }\n  return getValidationResults(validateRulesRecord(validate, values));\n}\nexport { validateValues };","map":{"version":3,"names":["getValidationResults","errors","filteredErrors","filterErrors","hasErrors","Object","keys","length","validateRulesRecord","rules","values","path","arguments","undefined","reduce","acc","ruleKey","rule","rulePath","concat","value","getPath","arrayValidation","Array","isArray","forEach","_item","index","validateValues","validate"],"sources":["../../src/validate/validate-values.ts"],"sourcesContent":["import { filterErrors } from '../filter-errors';\nimport { getPath } from '../paths';\nimport { FormValidateInput, FormErrors, FormRulesRecord } from '../types';\n\nfunction getValidationResults(errors: FormErrors) {\n  const filteredErrors = filterErrors(errors);\n  return { hasErrors: Object.keys(filteredErrors).length > 0, errors: filteredErrors };\n}\n\nfunction validateRulesRecord<T>(\n  rules: FormRulesRecord<T>,\n  values: T,\n  path = '',\n  errors: FormErrors = {}\n) {\n  if (typeof rules !== 'object' || rules === null) {\n    return errors;\n  }\n\n  return Object.keys(rules).reduce((acc, ruleKey) => {\n    const rule = rules[ruleKey];\n    const rulePath = `${path === '' ? '' : `${path}.`}${ruleKey}`;\n    const value = getPath(rulePath, values);\n    let arrayValidation = false;\n\n    if (typeof rule === 'function') {\n      acc[rulePath] = rule(value, values, rulePath);\n    }\n\n    if (typeof rule === 'object' && Array.isArray(value)) {\n      arrayValidation = true;\n      value.forEach((_item, index) =>\n        validateRulesRecord(rule, values, `${rulePath}.${index}`, acc)\n      );\n    }\n\n    if (typeof rule === 'object' && typeof value === 'object' && value !== null) {\n      if (!arrayValidation) {\n        validateRulesRecord(rule, values, rulePath, acc);\n      }\n    }\n\n    return acc;\n  }, errors);\n}\n\nexport function validateValues<T>(validate: FormValidateInput<T>, values: T) {\n  if (typeof validate === 'function') {\n    return getValidationResults(validate(values));\n  }\n\n  return getValidationResults(validateRulesRecord(validate, values));\n}\n"],"mappings":";;AAEA,SAASA,oBAAoBA,CAACC,MAAM,EAAE;EACpC,MAAMC,cAAc,GAAGC,YAAY,CAACF,MAAM,CAAC;EAC3C,OAAO;IAAEG,SAAS,EAAEC,MAAM,CAACC,IAAI,CAACJ,cAAc,CAAC,CAACK,MAAM,GAAG,CAAC;IAAEN,MAAM,EAAEC;EAAc,CAAE;AACtF;AACA,SAASM,mBAAmBA,CAACC,KAAK,EAAEC,MAAM,EAA0B;EAAA,IAAxBC,IAAI,GAAAC,SAAA,CAAAL,MAAA,QAAAK,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAG,EAAE;EAAA,IAAEX,MAAM,GAAAW,SAAA,CAAAL,MAAA,QAAAK,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAG,EAAE;EAChE,IAAI,OAAOH,KAAK,KAAK,QAAQ,IAAIA,KAAK,KAAK,IAAI,EAAE;IAC/C,OAAOR,MAAM;EACjB;EACE,OAAOI,MAAM,CAACC,IAAI,CAACG,KAAK,CAAC,CAACK,MAAM,CAAC,CAACC,GAAG,EAAEC,OAAO,KAAK;IACjD,MAAMC,IAAI,GAAGR,KAAK,CAACO,OAAO,CAAC;IAC3B,MAAME,QAAQ,MAAAC,MAAA,CAAMR,IAAI,KAAK,EAAE,GAAG,EAAE,MAAAQ,MAAA,CAAMR,IAAI,MAAG,EAAAQ,MAAA,CAAGH,OAAO,CAAE;IAC7D,MAAMI,KAAK,GAAGC,OAAO,CAACH,QAAQ,EAAER,MAAM,CAAC;IACvC,IAAIY,eAAe,GAAG,KAAK;IAC3B,IAAI,OAAOL,IAAI,KAAK,UAAU,EAAE;MAC9BF,GAAG,CAACG,QAAQ,CAAC,GAAGD,IAAI,CAACG,KAAK,EAAEV,MAAM,EAAEQ,QAAQ,CAAC;IACnD;IACI,IAAI,OAAOD,IAAI,KAAK,QAAQ,IAAIM,KAAK,CAACC,OAAO,CAACJ,KAAK,CAAC,EAAE;MACpDE,eAAe,GAAG,IAAI;MACtBF,KAAK,CAACK,OAAO,CAAC,CAACC,KAAK,EAAEC,KAAK,KAAKnB,mBAAmB,CAACS,IAAI,EAAEP,MAAM,KAAAS,MAAA,CAAKD,QAAQ,OAAAC,MAAA,CAAIQ,KAAK,GAAIZ,GAAG,CAAC,CAAC;IACrG;IACI,IAAI,OAAOE,IAAI,KAAK,QAAQ,IAAI,OAAOG,KAAK,KAAK,QAAQ,IAAIA,KAAK,KAAK,IAAI,EAAE;MAC3E,IAAI,CAACE,eAAe,EAAE;QACpBd,mBAAmB,CAACS,IAAI,EAAEP,MAAM,EAAEQ,QAAQ,EAAEH,GAAG,CAAC;MACxD;IACA;IACI,OAAOA,GAAG;EACd,CAAG,EAAEd,MAAM,CAAC;AACZ;AACO,SAAS2B,cAAcA,CAACC,QAAQ,EAAEnB,MAAM,EAAE;EAC/C,IAAI,OAAOmB,QAAQ,KAAK,UAAU,EAAE;IAClC,OAAO7B,oBAAoB,CAAC6B,QAAQ,CAACnB,MAAM,CAAC,CAAC;EACjD;EACE,OAAOV,oBAAoB,CAACQ,mBAAmB,CAACqB,QAAQ,EAAEnB,MAAM,CAAC,CAAC;AACpE","ignoreList":[]},"metadata":{},"sourceType":"module"}