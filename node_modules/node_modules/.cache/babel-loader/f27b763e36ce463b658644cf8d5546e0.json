{"ast":null,"code":"import{Container,Grid}from\"@mantine/core\";import{useEffect,useMemo,useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{getCartItems}from\"../redux/slices/cartSlice\";import BillingDetails from\"../components/Checkout/BillingDetails\";import OrderDetails from\"../components/Checkout/OrderDetails\";import SkeletonUserCheckoutDetails from\"../components/Skeletons/SkeletonUserCheckoutDetails\";import SkeletonOrderDetails from\"../components/Skeletons/SkeletonOrderDetails\";import{useNavigate}from\"react-router-dom\";import React from\"react\";const Checkout=()=>{var _Object$entries,_Object$entries2;const dispatch=useDispatch();const navigate=useNavigate();const{cart,isGettingCart}=useSelector(state=>state.cart);const{user,isRefreshingToken}=useSelector(state=>state.auth);const{addOrder}=useSelector(state=>state.order);const[mustSubmit,setMustSubmit]=useState(false);useMemo(()=>{document.title=\"Checkout | Pizza Fleet\";return()=>{document.title=\"Pizza Fleet\";};},[]);useEffect(()=>{dispatch(getCartItems());},[dispatch]);let subTotal=0;// eslint-disable-next-line no-unused-expressions\nif(cart&&(Object===null||Object===void 0?void 0:(_Object$entries=Object.entries(cart))===null||_Object$entries===void 0?void 0:_Object$entries.length)>0){var _cart$cartItems;// eslint-disable-next-line no-unused-expressions\ncart===null||cart===void 0?void 0:(_cart$cartItems=cart.cartItems)===null||_cart$cartItems===void 0?void 0:_cart$cartItems.map(item=>{subTotal+=item.pizza.price*item.quantity;return subTotal;});}useEffect(()=>{if(addOrder.success){navigate(\"/order-placed\");}},[addOrder.success,navigate]);return/*#__PURE__*/React.createElement(Container,{size:\"lg\"},/*#__PURE__*/React.createElement(Grid,{my:15},isRefreshingToken&&/*#__PURE__*/React.createElement(SkeletonUserCheckoutDetails,null),!isRefreshingToken&&/*#__PURE__*/React.createElement(BillingDetails,{user:user,onCheckoutFinish:()=>setMustSubmit(false),mustSubmit:mustSubmit}),isGettingCart&&/*#__PURE__*/React.createElement(SkeletonOrderDetails,null),!isGettingCart&&cart&&(Object===null||Object===void 0?void 0:(_Object$entries2=Object.entries(cart))===null||_Object$entries2===void 0?void 0:_Object$entries2.length)>0&&/*#__PURE__*/React.createElement(OrderDetails,{cart:cart,subTotal:subTotal,isGettingCart:isGettingCart,onCheckout:()=>setMustSubmit(true)})));};export default Checkout;","map":{"version":3,"names":["Container","Grid","useEffect","useMemo","useState","useDispatch","useSelector","getCartItems","BillingDetails","OrderDetails","SkeletonUserCheckoutDetails","SkeletonOrderDetails","useNavigate","React","Checkout","_Object$entries","_Object$entries2","dispatch","navigate","cart","isGettingCart","state","user","isRefreshingToken","auth","addOrder","order","mustSubmit","setMustSubmit","document","title","subTotal","Object","entries","length","_cart$cartItems","cartItems","map","item","pizza","price","quantity","success","createElement","size","my","onCheckoutFinish","onCheckout"],"sources":["/home/devuser/SACHIN/client/src/pages/Checkout.js"],"sourcesContent":["import { Container, Grid } from \"@mantine/core\";\nimport { useEffect, useMemo, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getCartItems } from \"../redux/slices/cartSlice\";\nimport BillingDetails from \"../components/Checkout/BillingDetails\";\nimport OrderDetails from \"../components/Checkout/OrderDetails\";\nimport SkeletonUserCheckoutDetails from \"../components/Skeletons/SkeletonUserCheckoutDetails\";\nimport SkeletonOrderDetails from \"../components/Skeletons/SkeletonOrderDetails\";\nimport { useNavigate } from \"react-router-dom\";\nimport React from \"react\";\n\nconst Checkout = () => {\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const { cart, isGettingCart } = useSelector((state) => state.cart);\n  const { user, isRefreshingToken } = useSelector((state) => state.auth);\n  const { addOrder } = useSelector((state) => state.order);\n  const [mustSubmit, setMustSubmit] = useState(false);\n\n  useMemo(() => {\n    document.title = \"Checkout | Pizza Fleet\";\n    return () => {\n      document.title = \"Pizza Fleet\";\n    };\n  }, []);\n\n  useEffect(() => {\n    dispatch(getCartItems());\n  }, [dispatch]);\n\n  let subTotal = 0;\n  // eslint-disable-next-line no-unused-expressions\n  if (cart && Object?.entries(cart)?.length > 0) {\n    // eslint-disable-next-line no-unused-expressions\n    cart?.cartItems?.map((item) => {\n      subTotal += item.pizza.price * item.quantity;\n      return subTotal;\n    });\n  }\n\n  useEffect(() => {\n    if (addOrder.success) {\n      navigate(\"/order-placed\");\n    }\n  }, [addOrder.success, navigate]);\n\n  return (\n    <Container size=\"lg\">\n      <Grid my={15}>\n        {isRefreshingToken && <SkeletonUserCheckoutDetails />}\n        {!isRefreshingToken && (\n          <BillingDetails\n            user={user}\n            onCheckoutFinish={() => setMustSubmit(false)}\n            mustSubmit={mustSubmit}\n          />\n        )}\n        {isGettingCart && <SkeletonOrderDetails />}\n        {!isGettingCart && cart && Object?.entries(cart)?.length > 0 && (\n          <OrderDetails\n            cart={cart}\n            subTotal={subTotal}\n            isGettingCart={isGettingCart}\n            onCheckout={() => setMustSubmit(true)}\n          />\n        )}\n      </Grid>\n    </Container>\n  );\n};\n\nexport default Checkout;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}